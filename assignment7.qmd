---
title: "Assignment 7"
author:
  name: Natalia
  date: 12.10.2025
format: html
execute:
  echo: true
  warning: false
  message: false
---

# Assignment 7

Use tidyr and dplyr libraries whenever possible, to do the following:

````{r}```
#Adding the tidyr and dplyr libraries
library(tidyr)
library(dplyr)
```` ``` ````

## Task 1

#### Instructions

Load the “iris” dataset and transform it to longer.
- tip: you should get 3 columns Species | Trait | Size

#### Solution

Using `pivot_longer()`.

````{r}```
#Transforming the built-in "iris" dataset to longer
iris_long <- iris %>%
  pivot_longer(
    #Choosing the columns
    cols = c(Sepal.Length, Sepal.Width, Petal.Length, Petal.Width),
    #Setting the names of the new columns
    names_to = "Trait",
    values_to = "Size"
   )

#Preview of the first few rows
head(iris_long)
```` ``` ````

## Task 2

#### Instructions 

Answer the following questions.
- tip: you can answer each question “piping” only 2-3 commands

### Task 2.1

What is the mean length and width of the sepal and petal of each species?

#### Solution

Calculating means with summarise grouped by spiecies and traits.

````{r}```
#Transforming the table to show means
 iris_mean <- iris_long  %>% 
  #Grouping by spiecies and traits
  group_by(Species, Trait) %>% 
  #Calculating the means
  summarise(Mean_of_size = mean(Size)) %>% 
  #Sorting
  arrange(Species, Trait)

View(iris_mean)
```` ``` ````

### Task 2.2

What is the largest and widest,  petal and sepal,  of virginica and versicolor species?

#### Solution

Separating Trait to get to maximums of specific pairs of Part and Measure.
Then filtering to be left with the important species and finding the maximums from group of specific combinations of Spiecies, Part and Measure.

````{r}```
#Separating Trait (ex. Petal.Length) into Part (Petal) and Measure (Lenght)
iris_long_sep <- iris_long %>%
  #Separating by "." written as "\\." to avoid its regular expresion interpretation as "any character"
  separate(Trait, into = c("Part", "Measure"), sep = "\\.")
```` ``` ````
````{r}```
#Filtering to narrow the table to Virginica and Veesicolor spiecies
iris_max <- iris_long_sep %>%
  filter(Species %in% c("virginica", "versicolor")) %>%
  group_by(Species, Part, Measure) %>%
  #Finding the maximums
  summarise(MaxSize = max(Size)) %>%
  #Sorting
  arrange(Species, Part, Measure)

View(iris_max)
```` ``` ````

### Task 2.3

For each species, for sepal and petal width and length, how many observations are above the mean?
- tip: adding the means as column might help

#### Solution

At the beginning it was necessary to calculate the average.
Then it needed to be connected to every specific combination of Solution, Part and Measure.
I did it using left join, joining by every combination.
When that was done, it was possible to compare Size with Mean and filter the rows according to it. 

````{r}```
#Transforming the table to show means
 iris_mean_group <- iris_long_sep  %>% 
  #Grouping by spiecies and traits
  group_by(Species, Part, Measure) %>% 
  #Calculating the means
  summarise(Mean_of_size = mean(Size)) 
```` ``` ````
````{r}```
iris_joined <- iris_long_sep %>%
  left_join(y = iris_mean_group, by = c("Species", "Part", "Measure")) %>%
  filter(Size > Mean_of_size)

View(iris_joined)
```` ``` ````
